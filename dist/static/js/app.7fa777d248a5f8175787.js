webpackJsonp([1],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},r,!1,function(e){n("P6Sl")},null,null).exports,a=n("/ocq"),s=n("BO1k"),h=n.n(s),c=n("Ml+6"),d=n("SR+r"),l=n("BMSc"),u={name:"ShowModel",data:function(){return{userinfo:{userId:0,userName:"",year:"",gender:""},modelUrl:"static/shapr3d_export_2021-05-09_12h29m.obj",reData:[],rootGroup:new c.g,camera:null,scene:new c.t,renderer:new c.y,colors:{A:{M:616866,R:16747520},B:{M:2382458,R:12549936},C:{M:213866,R:10902272},D:{M:6596817,R:16760947}},cell:{maxX:11,maxY:5,sideLength:15,padding:1},STLFileName:"",Width:null,height:null,container:null,targetRotation:0,targetRotationOnPointerDown:0,pointerX:0,pointerXOnPointerDown:0}},mounted:function(){this.width=document.getElementById("container").clientWidth,this.height=document.getElementById("container").clientHeight,this.scene=(new c.t).add(this.rootGroup),this.getReData(),this.createColumns(this.reData),this.loadBase(this.modelUrl,1e3),this.createLight(),this.createCamera(),this.renderer.setSize(this.width,this.height),document.getElementById("container").appendChild(this.renderer.domElement),this.container=document.getElementById("container"),this.container.appendChild(this.renderer.domElement),this.container.style.touchAction="none",this.container.addEventListener("pointerdown",this.onPointerDown),this.createControls(),this.render(),window.onresize=this.onWindowResize},methods:{getReData:function(){for(var e=0;e<=51;e++)this.reData[e]={weekNum:e+1,hours:Math.round(30*Math.random())}},createColumns:function(e){var t=this.cell.sideLength-2*this.cell.padding,n=new c.b(t,t,1),i=new c.g,r=void 0,o=void 0,a=!0,s=!1,d=void 0;try{for(var l,u=h()(e);!(a=(l=u.next()).done);a=!0){var m=l.value,p=new c.m(n,new c.n({color:this.colors.A.M,wireframe:!0}));p.scale.set(1,1,1.4*m.hours),r=Math.floor((m.weekNum-1)/this.cell.maxY),o=(m.weekNum-1+this.cell.maxY)%this.cell.maxY;var w=r*this.cell.sideLength+this.cell.padding,g=o*this.cell.sideLength+this.cell.padding;p.position.set(w,g,.7*m.hours),p.name=m.weekNum+":"+m.hours,i.add(p)}}catch(e){s=!0,d=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw d}}i.name="columns",this.setCenter(i),this.rootGroup.add(i)},loadBase:function(e,t){var n=this;(new d.a).load(e,function(e){e.scale.set(t,t,t),e.children[0].material=new c.n({color:n.colors.A.M,wireframe:!0}),e.name="base",n.setCenter(e),n.rootGroup.add(e);var i=n.getSize(e),r=n.rootGroup.getObjectByName("columns"),o=n.getSize(r);r.translateZ((i.z+o.z)/2),n.rootGroup.lookAt(0,1,0)})},createLight:function(){},createCamera:function(){var e=this.width/this.height;this.camera=new c.p(30,e,1,2500),this.camera.position.set(0,300,700),this.camera.lookAt(this.rootGroup.position),this.scene.add(this.camera)},render:function(){requestAnimationFrame(this.render),this.rootGroup.rotation.z+=.05*(this.targetRotation-this.rootGroup.rotation.z),this.renderer.clear(),this.renderer.render(this.scene,this.camera)},createControls:function(){var e=new l.a(this.camera,this.renderer.domElement);e.enableZoom=!0,e.minDistance=100,e.maxDistance=2e3,e.enableDamping=!0,e.dampingFactor=.8},onWindowResize:function(){this.width=document.getElementById("container").clientWidth,this.height=document.getElementById("container").clientHeight,this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.render(this.scene,this.camera)},setCenter:function(e){var t=new c.x;(new c.a).expandByObject(e).getCenter(t),e.position.set(-t.x,-t.y,-t.z)},getSize:function(e){var t=new c.x;return(new c.a).expandByObject(e).getSize(t),t},onPointerDown:function(e){!1!==e.isPrimary&&(this.pointerXOnPointerDown=e.clientX-this.width/2,this.targetRotationOnPointerDown=this.targetRotation,document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp))},onPointerMove:function(e){!1!==e.isPrimary&&(this.pointerX=e.clientX-this.width/2,this.targetRotation=this.targetRotationOnPointerDown+.02*(this.pointerX-this.pointerXOnPointerDown))},onPointerUp:function(e){!1!==e.isPrimary&&(document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp))}}},m={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"container"}})},staticRenderFns:[]};var p=n("VU/8")(u,m,!1,function(e){n("lA49")},null,null).exports;i.a.use(a.a);var w=new a.a({mode:"history",routes:[{path:"/",name:"ShowModel",component:p}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:w,components:{App:o},template:"<App/>"})},P6Sl:function(e,t){},lA49:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7fa777d248a5f8175787.js.map